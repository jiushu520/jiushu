<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>玖数学练习</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body {
            height: 100%; /* 确保整个文档填满整个视口高度 */
            margin: 0; /* 移除默认边距 */
            padding: 0; /* 移除默认内边距 */
            font-family: Arial, sans-serif;
            background-color: lightblue;
            display: flex;
        }

        #navigation {
            width: 20%;
            border-right: 1px solid #000;
            padding: 10px;
           text-align: center; /* 添加文本居中 */
           line-height: 2.5;   /* 设置1.5倍行距 */
           height: 100vh; /* 设置为视口的高度 */
        }

        #game-container {
            width: 80%;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #equation, #options {
            text-align: center;
            width: 100%;
        }

        .option {
            display: inline-block;
            margin: 0 10px;
            padding: 10px;
            border: 1px solid #000;
            cursor: pointer;
            margin: 0 10px 20px;
        }

        /* 可以根据需要添加更多样式 */
    </style>
</head>
<body>
    <div id="navigation">
        <h3>选择题型</h3>
        <button onclick="loadQuestions(fractionOperations, '分数运算')">分数运算</button><br>
        <button onclick="loadQuestions(fractionEquations, '分数方程组')">分数方程组</button><br>
    </div>

    <div id="game-container">
       <h3>玖数学测训系统</h3>
        <div id="current-topic"></div> <!-- 新添加的元素 -->

        <div id="equation"></div>
        <div id="options"></div>
        <div id="scoreboard">现在得分:<span id="score">0</span>,已回答:<span id="answered">0</span></div>
        <div id="rounds-scoreboard"></div>
    </div>

    <script>
        let currentQuestionBank;
        let currentEquationSystem;
        let score = 0;
        let questionsAnswered = 0;
        let roundsScores = [];
        let currentTopic = '';

        const fractionOperations = [
           {equation:"8\\frac{1}{7}=?",correctOption:"\\frac{57}{7}",incorrectOptions:["\\frac{24}{7}","\\frac{9}{7}","\\frac{45}{7}",]},

{equation:"7\\frac{1}{6}=?",correctOption:"\\frac{43}{6}",incorrectOptions:["\\frac{56}{6}","\\frac{72}{6}","\\frac{5}{6}",]},

{equation:"7\\frac{1}{7}=?",correctOption:"\\frac{50}{7}",incorrectOptions:["\\frac{72}{7}","\\frac{3}{7}","\\frac{42}{7}",]}, // 分数运算的题库
            // {equation: "...", correctOption: "...", incorrectOptions: ["...", "...", "..."]},
            // 其他题目
        ];

        const fractionEquations = [
            {equation: "\\begin{cases} \\frac{1}{3}x+y=15 \\\\ \\frac{4}{5}x+3y=42\\end{cases}\\genfrac{}{}{0pt}{}{①}{②} ",correctOption:"\\begin{cases} x=15 \\\\ x=10\\end{cases} ",incorrectOptions:["\\begin{cases} x=8 \\\\ y=1\\end{cases}","\\begin{cases} x=12 \\\\ y=1\\end{cases}","\\begin{cases} x=1 \\\\ y=7\\end{cases}",]},

{equation: "\\begin{cases} \\frac{1}{5}x+y=14 \\\\ \\frac{4}{5}x+4y=56\\end{cases}\\genfrac{}{}{0pt}{}{①}{②} ",correctOption:"\\begin{cases} x=25 \\\\ x=9\\end{cases} ",incorrectOptions:["\\begin{cases} x=7 \\\\ y=7\\end{cases}","\\begin{cases} x=9 \\\\ y=10\\end{cases}","\\begin{cases} x=3 \\\\ y=8\\end{cases}",]},

{equation: "\\begin{cases} \\frac{1}{2}x+y=10 \\\\ \\frac{1}{3}x+2y=12\\end{cases}\\genfrac{}{}{0pt}{}{①}{②} ",correctOption:"\\begin{cases} x=12 \\\\ x=4\\end{cases} ",incorrectOptions:["\\begin{cases} x=13 \\\\ y=6\\end{cases}","\\begin{cases} x=5 \\\\ y=11\\end{cases}","\\begin{cases} x=5 \\\\ y=7\\end{cases}",]},// 分数方程组的题库
            // {equation: "...", correctOption: "...", incorrectOptions: ["...", "...", "..."]},
            // 其他题目
        ];

function loadQuestions(questionBank, topic) {
    currentQuestionBank = questionBank;
    currentTopic = topic;
    score = 0;
    questionsAnswered = 0;
    updateScoreboard();
    updateRoundsScoreboard();
    document.getElementById('current-topic').textContent = `玖数学: ${currentTopic}`; // 更新题型名称
    startNewRound();
}

        function generateEquationSystem() {
            const randomIndex = Math.floor(Math.random() * currentQuestionBank.length);
            const { equation, correctOption, incorrectOptions } = currentQuestionBank[randomIndex];

            const correctIndex = Math.floor(Math.random() * 4);
            const options = [...incorrectOptions];
            options.splice(correctIndex, 0, correctOption);

            currentEquationSystem = { equationSystem: `\\[ ${equation} \\]`, correctIndex, options };
        }

        function generateOptions() {
            const labels = ['A', 'B', 'C', 'D'];
            return currentEquationSystem.options.map((option, index) => `<div class="option" onclick="checkAnswer(${index})"><span>${labels[index]}. \\(${option}\\)</span></div>`).join('');
        }

        function displayEquationSystem() {
            generateEquationSystem();
            document.getElementById('equation').innerHTML = currentEquationSystem.equationSystem;
            document.getElementById('options').innerHTML = generateOptions();
            MathJax.typeset();
        }

        function startNewRound() {
            if (questionsAnswered >= 10) {
                roundsScores.push({ topic: currentTopic, score: score });
                score = 0;
                questionsAnswered = 0;
                updateRoundsScoreboard();
            }
            displayEquationSystem();
        }

        function checkAnswer(selectedIndex) {
            if (parseInt(selectedIndex) === currentEquationSystem.correctIndex) {
                score++;
            }

            questionsAnswered++;
            updateScoreboard();
            startNewRound();
        }

        function updateScoreboard() {
            document.getElementById('score').textContent = score;
            document.getElementById('answered').textContent = questionsAnswered;
        }

        function updateRoundsScoreboard() {
            let roundsScoresText = roundsScores.map((round, index) => `第${index + 1}轮 (${round.topic}): ${round.score}分共10题`).join('<br>');
            document.getElementById('rounds-scoreboard').innerHTML = roundsScoresText;
        }

        // 默认加载分数运算题库
        window.onload = () => loadQuestions(fractionOperations, '分数运算');
    </script>
</body>
</html>
